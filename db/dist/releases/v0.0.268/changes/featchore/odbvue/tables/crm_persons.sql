-- liquibase formatted sql
-- changeset ODBVUE:1768042839569 stripComments:false  logicalFilePath:featchore\odbvue\tables\crm_persons.sql
-- sqlcl_snapshot db/src/database/odbvue/tables/crm_persons.sql:null:39f5623922c407a2feed1da1bad45ea4aa152606:create

CREATE TABLE odbvue.crm_persons (
    id         NUMBER(19, 0) GENERATED BY DEFAULT AS IDENTITY NOT NULL ENABLE,
    guid       RAW(16) DEFAULT sys_guid() NOT NULL ENABLE,
    type       CHAR(1 CHAR) DEFAULT 'A' NOT NULL ENABLE,
    first_name VARCHAR2(200 CHAR),
    last_name  VARCHAR2(200 CHAR),
    legal_name VARCHAR2(2000 CHAR),
    status     CHAR(1 CHAR) DEFAULT 'A' NOT NULL ENABLE,
    attributes CLOB,
    created    TIMESTAMP(6) DEFAULT systimestamp NOT NULL ENABLE,
    modified   TIMESTAMP(6) DEFAULT systimestamp
);

ALTER TABLE odbvue.crm_persons ADD CONSTRAINT chk_crm_persons_attributes_json CHECK ( attributes IS JSON ) ENABLE;

ALTER TABLE odbvue.crm_persons
    ADD CONSTRAINT chk_crm_persons_status
        CHECK ( status IN ( 'A', 'B', 'C' ) ) ENABLE;

ALTER TABLE odbvue.crm_persons
    ADD CONSTRAINT chk_crm_persons_type
        CHECK ( type IN ( 'I', 'O' ) ) ENABLE;

ALTER TABLE odbvue.crm_persons
    ADD CONSTRAINT cpk_crm_persons PRIMARY KEY ( id )
        USING INDEX ENABLE;

ALTER TABLE odbvue.crm_persons ADD CONSTRAINT cuq_crm_persons_guid UNIQUE ( guid )
    USING INDEX ENABLE;

