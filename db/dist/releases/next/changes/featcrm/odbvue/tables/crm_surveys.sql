-- liquibase formatted sql
-- changeset ODBVUE:1767794234963 stripComments:false  logicalFilePath:featcrm\odbvue\tables\crm_surveys.sql
-- sqlcl_snapshot db/src/database/odbvue/tables/crm_surveys.sql:null:a9f0b5532de3876ce12e65ab24b7e5daa68e0ec6:create

CREATE TABLE odbvue.crm_surveys (
    id          NUMBER(19, 0) GENERATED BY DEFAULT AS IDENTITY NOT NULL ENABLE,
    code        VARCHAR2(16 CHAR) GENERATED ALWAYS AS ( lower(to_char(id, 'FMXXXXXXXX')) ) VIRTUAL NOT NULL ENABLE,
    title       VARCHAR2(200 CHAR) NOT NULL ENABLE,
    description VARCHAR2(2000 CHAR),
    valid_from  TIMESTAMP(6) DEFAULT systimestamp NOT NULL ENABLE,
    valid_to    TIMESTAMP(6),
    active      CHAR(1 CHAR) DEFAULT 'N' NOT NULL ENABLE,
    author      CHAR(32 CHAR) NOT NULL ENABLE,
    created     TIMESTAMP(6) DEFAULT systimestamp NOT NULL ENABLE,
    editor      CHAR(32 CHAR),
    updated     TIMESTAMP(6)
);

ALTER TABLE odbvue.crm_surveys
    ADD CONSTRAINT pk_crm_surveys PRIMARY KEY ( id )
        USING INDEX ENABLE;

ALTER TABLE odbvue.crm_surveys ADD CONSTRAINT uq_crm_surveys_code UNIQUE ( code )
    USING INDEX ENABLE;

