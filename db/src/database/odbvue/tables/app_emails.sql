CREATE TABLE odbvue.app_emails (
    id        CHAR(32 CHAR) DEFAULT lower(sys_guid()) NOT NULL ENABLE,
    subject   VARCHAR2(240 CHAR) NOT NULL ENABLE,
    content   CLOB,
    priority  NUMBER(1, 0) DEFAULT 3 NOT NULL ENABLE,
    status    CHAR(1 CHAR) DEFAULT 'N' NOT NULL ENABLE,
    created   TIMESTAMP(6) DEFAULT systimestamp NOT NULL ENABLE,
    delivered TIMESTAMP(6),
    attempts  NUMBER(10, 0) DEFAULT 0 NOT NULL ENABLE,
    postponed TIMESTAMP(6),
    error     VARCHAR2(2000 CHAR)
)
        PARTITION BY LIST ( status ) ( PARTITION emails_active VALUES ( 'N' ),
            PARTITION emails_archive VALUES ( 'S',
                                              'E' )
        )
    ENABLE ROW MOVEMENT;

ALTER TABLE odbvue.app_emails
    ADD CONSTRAINT cpk_app_emails PRIMARY KEY ( id )
        USING INDEX ENABLE;

ALTER TABLE odbvue.app_emails
    ADD CONSTRAINT csc_app_emails_status
        CHECK ( status IN ( 'N', 'S', 'E' ) ) ENABLE;


-- sqlcl_snapshot {"hash":"f22f0384480ebb8f2875891b9b4e1f7609190183","type":"TABLE","name":"APP_EMAILS","schemaName":"ODBVUE","sxml":"\n  <TABLE xmlns=\"http://xmlns.oracle.com/ku\" version=\"1.0\">\n   <SCHEMA>ODBVUE</SCHEMA>\n   <NAME>APP_EMAILS</NAME>\n   <RELATIONAL_TABLE>\n      <COL_LIST>\n         <COL_LIST_ITEM>\n            <NAME>ID</NAME>\n            <DATATYPE>CHAR</DATATYPE>\n            <LENGTH>32</LENGTH>\n            <CHAR_SEMANTICS></CHAR_SEMANTICS>\n            <COLLATE_NAME>USING_NLS_COMP</COLLATE_NAME>\n            <DEFAULT>LOWER(SYS_GUID())</DEFAULT>\n            <NOT_NULL></NOT_NULL>\n         </COL_LIST_ITEM>\n         <COL_LIST_ITEM>\n            <NAME>SUBJECT</NAME>\n            <DATATYPE>VARCHAR2</DATATYPE>\n            <LENGTH>240</LENGTH>\n            <CHAR_SEMANTICS></CHAR_SEMANTICS>\n            <COLLATE_NAME>USING_NLS_COMP</COLLATE_NAME>\n            <NOT_NULL></NOT_NULL>\n         </COL_LIST_ITEM>\n         <COL_LIST_ITEM>\n            <NAME>CONTENT</NAME>\n            <DATATYPE>CLOB</DATATYPE>\n            <COLLATE_NAME>USING_NLS_COMP</COLLATE_NAME>\n         </COL_LIST_ITEM>\n         <COL_LIST_ITEM>\n            <NAME>PRIORITY</NAME>\n            <DATATYPE>NUMBER</DATATYPE>\n            <PRECISION>1</PRECISION>\n            <SCALE>0</SCALE>\n            <DEFAULT>3</DEFAULT>\n            <NOT_NULL></NOT_NULL>\n         </COL_LIST_ITEM>\n         <COL_LIST_ITEM>\n            <NAME>STATUS</NAME>\n            <DATATYPE>CHAR</DATATYPE>\n            <LENGTH>1</LENGTH>\n            <CHAR_SEMANTICS></CHAR_SEMANTICS>\n            <COLLATE_NAME>USING_NLS_COMP</COLLATE_NAME>\n            <DEFAULT>'N'</DEFAULT>\n            <NOT_NULL></NOT_NULL>\n         </COL_LIST_ITEM>\n         <COL_LIST_ITEM>\n            <NAME>CREATED</NAME>\n            <DATATYPE>TIMESTAMP</DATATYPE>\n            <SCALE>6</SCALE>\n            <DEFAULT>SYSTIMESTAMP</DEFAULT>\n            <NOT_NULL></NOT_NULL>\n         </COL_LIST_ITEM>\n         <COL_LIST_ITEM>\n            <NAME>DELIVERED</NAME>\n            <DATATYPE>TIMESTAMP</DATATYPE>\n            <SCALE>6</SCALE>\n         </COL_LIST_ITEM>\n         <COL_LIST_ITEM>\n            <NAME>ATTEMPTS</NAME>\n            <DATATYPE>NUMBER</DATATYPE>\n            <PRECISION>10</PRECISION>\n            <SCALE>0</SCALE>\n            <DEFAULT>0</DEFAULT>\n            <NOT_NULL></NOT_NULL>\n         </COL_LIST_ITEM>\n         <COL_LIST_ITEM>\n            <NAME>POSTPONED</NAME>\n            <DATATYPE>TIMESTAMP</DATATYPE>\n            <SCALE>6</SCALE>\n         </COL_LIST_ITEM>\n         <COL_LIST_ITEM>\n            <NAME>ERROR</NAME>\n            <DATATYPE>VARCHAR2</DATATYPE>\n            <LENGTH>2000</LENGTH>\n            <CHAR_SEMANTICS></CHAR_SEMANTICS>\n            <COLLATE_NAME>USING_NLS_COMP</COLLATE_NAME>\n         </COL_LIST_ITEM>\n      </COL_LIST>\n      <CHECK_CONSTRAINT_LIST>\n         <CHECK_CONSTRAINT_LIST_ITEM>\n            <NAME>CSC_APP_EMAILS_STATUS</NAME>\n            <CONDITION>status IN ('N', 'S', 'E')</CONDITION>\n         </CHECK_CONSTRAINT_LIST_ITEM>\n      </CHECK_CONSTRAINT_LIST>\n      <PRIMARY_KEY_CONSTRAINT_LIST>\n         <PRIMARY_KEY_CONSTRAINT_LIST_ITEM>\n            <NAME>CPK_APP_EMAILS</NAME>\n            <COL_LIST>\n               <COL_LIST_ITEM>\n                  <NAME>ID</NAME>\n               </COL_LIST_ITEM>\n            </COL_LIST>\n            <USING_INDEX></USING_INDEX>\n         </PRIMARY_KEY_CONSTRAINT_LIST_ITEM>\n      </PRIMARY_KEY_CONSTRAINT_LIST>\n      <DEFAULT_COLLATION>USING_NLS_COMP</DEFAULT_COLLATION>\n      <TABLE_PROPERTIES>\n         <LIST_PARTITIONING>\n            <COL_LIST>\n               <COL_LIST_ITEM>\n                  <NAME>STATUS</NAME>\n               </COL_LIST_ITEM>\n            </COL_LIST>\n            <DEFAULT_PHYSICAL_PROPERTIES>\n               <HEAP_TABLE></HEAP_TABLE>\n            </DEFAULT_PHYSICAL_PROPERTIES>\n            <PARTITION_LIST>\n               <PARTITION_LIST_ITEM>\n                  <NAME>EMAILS_ACTIVE</NAME>\n                  <VALUES>'N'</VALUES>\n                  <PHYSICAL_PROPERTIES>\n                     <HEAP_TABLE></HEAP_TABLE>\n                  </PHYSICAL_PROPERTIES>\n                  <COLUMN_PROPERTIES>\n                     <COL_LIST>\n                        <COL_LIST_ITEM>\n                           <NAME>CONTENT</NAME>\n                           <DATATYPE>CLOB</DATATYPE>\n                           <LOB_PROPERTIES>\n                              <STORAGE_TABLE></STORAGE_TABLE>\n                           </LOB_PROPERTIES>\n                        </COL_LIST_ITEM>\n                     </COL_LIST>\n                  </COLUMN_PROPERTIES>\n               </PARTITION_LIST_ITEM>\n               <PARTITION_LIST_ITEM>\n                  <NAME>EMAILS_ARCHIVE</NAME>\n                  <VALUES>'S', 'E'</VALUES>\n                  <PHYSICAL_PROPERTIES>\n                     <HEAP_TABLE></HEAP_TABLE>\n                  </PHYSICAL_PROPERTIES>\n                  <COLUMN_PROPERTIES>\n                     <COL_LIST>\n                        <COL_LIST_ITEM>\n                           <NAME>CONTENT</NAME>\n                           <DATATYPE>CLOB</DATATYPE>\n                           <LOB_PROPERTIES>\n                              <STORAGE_TABLE></STORAGE_TABLE>\n                           </LOB_PROPERTIES>\n                        </COL_LIST_ITEM>\n                     </COL_LIST>\n                  </COLUMN_PROPERTIES>\n               </PARTITION_LIST_ITEM>\n            </PARTITION_LIST>\n         </LIST_PARTITIONING>\n         <ROW_MOVEMENT></ROW_MOVEMENT>\n      </TABLE_PROPERTIES>\n   </RELATIONAL_TABLE>\n</TABLE>"}